# JWT json web token

## Learning goals :

- What is `JWT` ?

- How `JWT` working ?

- Where should `JWT` saved in frontend ?

- What should saved in the TOKEN from `JWT` ?

- what is mean `Baerer` Token and if `Baerer` word mendatory to use ?

## Resources :

- [JWT docs](https://jwt.io/)

- [JWT in 2 minutes (Video)](https://www.youtube.com/watch?v=7ozQLeFJpqs)

- [JWT Explained (Video)](https://www.youtube.com/watch?v=7Q17ubqLfaM)

## Answer the questions :

### What is JWT ?

### How `JWT` working ?

![JWT](./assets/JWT.png)

---

Super Fragen! Lass uns das Thema **JWT (JSON Web Token)** gemeinsam durchgehen – Schritt für Schritt, klar und strukturiert. Ziel: Du **verstehst**, **nutzt**, und **speicherst** JWTs sicher im MERN Stack. ✅

---

## 🔑 Was ist JWT?

**JWT (JSON Web Token)** ist ein **digitaler Token**, der verwendet wird, um **Benutzerauthentifizierung** und **Autorisierung** in modernen Webanwendungen sicher zu verwalten.

> Ein JWT ist wie ein digitaler Ausweis – man trägt ihn bei sich (z. B. im Browser) und zeigt ihn dem Server bei jeder Anfrage.

---

## 🛠️ Wie funktioniert JWT?

JWT besteht aus **3 Teilen** (alle Base64-codiert, durch Punkte getrennt):

```
HEADER.PAYLOAD.SIGNATURE
```

### 🔹 1. Header

```json
{
  "alg": "HS256",
  "typ": "JWT"
}
```

### 🔹 2. Payload (Daten im Token)

```json
{
  "userId": "abc123",
  "role": "admin",
  "exp": 1690000000
}
```

➡️ Hier speicherst du **nicht sensible Daten**, z. B.:

* User-ID
* Rolle
* Name (optional)
* Token-Gültigkeit (`exp`)

### 🔹 3. Signature

Vom Server generiert, um sicherzustellen, dass der Token **nicht manipuliert** wurde.

```bash
HMACSHA256(base64UrlEncode(header) + "." + base64UrlEncode(payload), secret)
```

---

## 🔄 Wie läuft der JWT-Ablauf?

1. 👤 User loggt sich ein (mit E-Mail & Passwort)
2. ✅ Server prüft Daten und erstellt JWT
3. 📩 Server schickt Token zurück an Frontend
4. 🗂 Frontend speichert Token lokal (siehe unten)
5. 🌐 Bei jeder API-Request wird Token im Header gesendet:

   ```http
   Authorization: Bearer <TOKEN>
   ```
6. 🔍 Backend verifiziert Token → erlaubt oder verbietet Zugriff

---

## 📍 Wo sollte man JWT im Frontend speichern?

| Option            | Sicherheit | Beschreibung                                                |
| ----------------- | ---------- | ----------------------------------------------------------- |
| `localStorage`    | 🔴 niedrig | Einfach, aber anfällig für XSS                              |
| `sessionStorage`  | 🟡 mittel  | Nur bis Tab geschlossen                                     |
| `httpOnly Cookie` | ✅ hoch     | Server-setzt Cookie, JS kann nicht lesen (sicher gegen XSS) |

> 🧠 Empfohlen: **httpOnly Cookies** für mehr Sicherheit
> **localStorage nur verwenden**, wenn du volle Kontrolle über XSS hast – z. B. bei reinen SPAs.

---

## 🧠 Was sollte NICHT im JWT gespeichert werden?

❌ Keine sensiblen Infos wie:

* Passwörter
* Adressen
* Zahlungsdaten
* Private API-Schlüssel

✅ Nur Dinge, die du clientseitig brauchst zur Anzeige oder Identifikation

---

## 🏷️ Was ist ein `Bearer` Token?

Das ist ein **Standard im HTTP-Header**, um dem Server zu zeigen:
„Ich habe einen gültigen Zugangstoken.“

```http
Authorization: Bearer <TOKEN>
```

### ⛔ Ist `Bearer` Pflicht?

* **Nicht technisch erforderlich**, aber **dringend empfohlen**
* Die meisten Backend-Libraries (z. B. `passport-jwt`, `express-jwt`) **erwarten** das Format:

```js
req.headers.authorization = "Bearer eyJhbGciOiJIUzI1NiIsInR..."
```

---

## ✅ Zusammenfassung

| Frage                | Antwort                                                                                              |
| -------------------- | ---------------------------------------------------------------------------------------------------- |
| Was ist JWT?         | Sicherer Auth-Token in JSON-Format                                                                   |
| Wie funktioniert es? | Besteht aus Header, Payload, Signature – verifiziert durch Server                                    |
| Wo speichern?        | Am sichersten: **httpOnly Cookies**; alternativ: `localStorage` (nicht empfohlen bei sensiblen Apps) |
| Was speichern?       | Nur nicht-sensible Infos: userId, role, etc.                                                         |
| Ist "Bearer" nötig?  | Ja, **empfohlen** für Kompatibilität mit Middleware                                                  |

---


